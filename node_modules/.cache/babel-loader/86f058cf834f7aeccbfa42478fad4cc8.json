{"ast":null,"code":"import _objectSpread from \"/Volumes/Angela He/treehacks/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Volumes/Angela He/treehacks/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Volumes/Angela He/treehacks/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Volumes/Angela He/treehacks/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Volumes/Angela He/treehacks/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Volumes/Angela He/treehacks/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Volumes/Angela He/treehacks/src/components/AddFriend.js\";\nimport React, { Component } from 'react';\nimport plant from '../graphics/icon.png';\nimport $ from 'jquery';\n\nvar AddFriend =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(AddFriend, _React$Component);\n\n  function AddFriend(props) {\n    var _this;\n\n    _classCallCheck(this, AddFriend);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AddFriend).call(this, props));\n\n    _this.setAddedFriend = function (mssg) {\n      _this.setState({\n        addedFriend: mssg\n      });\n    };\n\n    _this.setInvitedFriend = function (mssg) {\n      _this.setState({\n        invitedFriend: mssg\n      });\n    };\n\n    _this.addFriend = function () {\n      if (_this.state.loading === true) return;\n      var users = _this.state.users;\n      var email = $('#add-friend-email').val();\n\n      if (users === null) {\n        _this.setState({\n          loading: true\n        });\n\n        _this.props.firebase.users().once('value').then(function (snapshot) {\n          var usersObject = snapshot.val();\n          var usersList = Object.keys(usersObject).map(function (key) {\n            return _objectSpread({}, usersObject[key], {\n              uid: key\n            });\n          });\n\n          _this.setState({\n            users: usersList,\n            loading: false\n          });\n\n          for (var i = 0; i < usersList.length; i++) {\n            if (usersList[i].email == email) {\n              //send request\n              _this.props.firebase.user(usersList[i].uid).once('value').then(function (snapshot) {\n                var req = snapshot.val().requests;\n\n                if (req == undefined) {\n                  req = [];\n                }\n\n                req.push(_this.props.uid);\n\n                var keyref = _this.props.firebase.user(usersList[i].uid).push();\n\n                keyref.update({\n                  requests: req\n                });\n              });\n\n              break;\n            }\n          }\n        });\n      } else {\n        for (var i = 0; i < users.length; i++) {\n          if (users[i].email == email) {\n            //send request\n            _this.props.firebase.user(users[i].uid).once('value').then(function (snapshot) {\n              var req = snapshot.val().requests;\n\n              if (req == undefined) {\n                req = [];\n              }\n\n              req.push(_this.props.uid);\n\n              var keyref = _this.props.firebase.user(users[i].uid).push();\n\n              keyref.update({\n                requests: req\n              });\n            });\n\n            break;\n          }\n        }\n      }\n\n      _this.setAddedFriend('sent request!');\n    };\n\n    _this.inviteFriend = function () {\n      _this.setAddedFriend('invited!');\n    };\n\n    _this.state = {\n      addedFriend: '',\n      invitedFriend: '',\n      users: null,\n      loading: false\n    };\n    return _this;\n  }\n\n  _createClass(AddFriend, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var addedFriend = React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, this.state.addedFriend);\n      var invitedFriend = React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, this.state.invitedFriend);\n      return React.createElement(\"div\", {\n        className: \"modal network\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"close\",\n        onClick: function onClick() {\n          return _this2.props.setAddFriend(false);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"jam jam-close\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      })), React.createElement(\"img\", {\n        src: plant,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"add-friend\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, \"add friend\"), addedFriend, React.createElement(\"div\", {\n        className: \"network-input\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        id: \"add-friend-email\",\n        type: \"email\",\n        placeholder: \"what's their email?\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        onClick: this.addFriend,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, \"send request\"))), React.createElement(\"div\", {\n        className: \"invite-friend\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, \"invite friend\"), invitedFriend, React.createElement(\"div\", {\n        className: \"network-input\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"email\",\n        placeholder: \"what's their email?\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        onClick: this.inviteFriend,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, \"send invite\"))));\n    }\n  }]);\n\n  return AddFriend;\n}(React.Component);\n\n;\nexport default AddFriend;","map":{"version":3,"sources":["/Volumes/Angela He/treehacks/src/components/AddFriend.js"],"names":["React","Component","plant","$","AddFriend","props","setAddedFriend","mssg","setState","addedFriend","setInvitedFriend","invitedFriend","addFriend","state","loading","users","email","val","firebase","once","then","snapshot","usersObject","usersList","Object","keys","map","key","uid","i","length","user","req","requests","undefined","push","keyref","update","inviteFriend","setAddFriend"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport plant from '../graphics/icon.png';\nimport $ from 'jquery';\n\nclass AddFriend extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      addedFriend: '',\n      invitedFriend: '',\n      users: null,\n      loading: false\n    };\n  }\n\n  setAddedFriend = (mssg) => {\n    this.setState({\n      addedFriend: mssg\n    });\n  }\n\n  setInvitedFriend = (mssg) => {\n    this.setState({\n      invitedFriend: mssg\n    });\n  }\n\n  addFriend = () => {\n    if (this.state.loading === true) return;\n\n    let users = this.state.users;\n    let email = $('#add-friend-email').val();\n\n    if (users === null) {\n      this.setState({ loading: true });\n      this.props.firebase.users().once('value').then((snapshot) => {\n        const usersObject = snapshot.val();\n  \n        const usersList = Object.keys(usersObject).map(key => ({\n          ...usersObject[key],\n          uid: key,\n        }));\n  \n        this.setState({\n          users: usersList,\n          loading: false,\n        });\n        for (var i=0; i<usersList.length; i++){\n          if (usersList[i].email == email){\n            //send request\n            this.props.firebase.user(usersList[i].uid).once('value').then((snapshot) => {\n              let req = snapshot.val().requests;\n              if (req == undefined){\n                req = [];\n              }\n              req.push(this.props.uid);\n              var keyref = this.props.firebase.user(usersList[i].uid).push();\n              keyref.update({\n                requests: req\n              });\n            });\n            break;\n          }\n        }\n      });\n    }\n    else {\n      for (var i=0; i<users.length; i++){\n        if (users[i].email == email){\n          //send request\n          this.props.firebase.user(users[i].uid).once('value').then((snapshot) => {\n            let req = snapshot.val().requests;\n            if (req == undefined){\n              req = [];\n            }\n            req.push(this.props.uid);\n            var keyref = this.props.firebase.user(users[i].uid).push();\n            keyref.update({\n              requests: req\n            });\n          });\n          break;\n        }\n      }\n    }\n    this.setAddedFriend('sent request!');\n  };\n\n  inviteFriend = () => {\n    \n    this.setAddedFriend('invited!');\n  };\n\n  render()\n  {\n    let  addedFriend = (\n      <p>\n        {this.state.addedFriend}\n      </p>\n    );\n\n    let invitedFriend = (\n      <p>\n      {this.state.invitedFriend}\n    </p>\n    );\n\n    return (\n      <div className=\"modal network\">\n          <button className=\"close\" onClick = {()=>this.props.setAddFriend(false)}>\n            <span className=\"jam jam-close\"></span>\n          </button>\n          <img src={plant}></img>\n          <div className=\"add-friend\">\n            <h2>add friend</h2>\n            {addedFriend}\n            <div className=\"network-input\">\n              <input id=\"add-friend-email\" type=\"email\" placeholder=\"what's their email?\"></input>\n              <button onClick={this.addFriend}>send request</button>\n            </div>\n          </div>\n          <div className=\"invite-friend\">\n            <h2>invite friend</h2>\n            {invitedFriend}\n            <div className=\"network-input\">\n              <input type=\"email\" placeholder=\"what's their email?\"></input>\n              <button onClick={this.inviteFriend}>send invite</button>\n            </div>\n          </div>\n        </div>\n    );\n  }\n};\n\nexport default AddFriend;"]},"metadata":{},"sourceType":"module"}