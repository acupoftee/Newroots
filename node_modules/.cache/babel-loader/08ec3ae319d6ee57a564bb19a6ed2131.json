{"ast":null,"code":"import _classCallCheck from \"/Volumes/Angela He/treehacks/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Volumes/Angela He/treehacks/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Volumes/Angela He/treehacks/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Volumes/Angela He/treehacks/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Volumes/Angela He/treehacks/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Volumes/Angela He/treehacks/src/components/CheckinModal.js\";\nimport React, { Component } from 'react';\nimport $ from 'jquery';\nimport moment from 'moment';\nimport texture1 from './../graphics/flower.png';\nimport texture2 from './../graphics/thing.png';\n\nvar TextQ = function TextQ(props) {\n  return React.createElement(\"div\", {\n    className: \"ci-question\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 10\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 11\n    },\n    __self: this\n  }, props.q), React.createElement(\"textarea\", {\n    className: \"feelings\",\n    rows: \"3\",\n    placeholder: \"Hmm\",\n    onChange: function onChange(event) {\n      return props.setAnswer(event.target.value, props.index);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 12\n    },\n    __self: this\n  }, \">\"));\n};\n\nvar YesNoQ = function YesNoQ(props) {\n  return React.createElement(\"div\", {\n    className: \"ci-question\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 21\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 22\n    },\n    __self: this\n  }, props.q), React.createElement(\"div\", {\n    className: \"yesno\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 23\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    className: \"yes\",\n    onClick: function onClick() {\n      return props.setAnswer('yes', props.index);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 24\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    className: \"jam jam-check\",\n    style: {\n      color: 'white'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26\n    },\n    __self: this\n  })), React.createElement(\"button\", {\n    className: \"no\",\n    onClick: function onClick() {\n      return props.setAnswer('no', props.index);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    className: \"jam jam-close\",\n    style: {\n      color: '#8A8184'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30\n    },\n    __self: this\n  }, \" \"))), React.createElement(\"textarea\", {\n    className: \"feelings\",\n    rows: \"1\",\n    placeholder: \"Other comments\",\n    onChange: function onChange(event) {\n      return props.setComment(event, props.index);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33\n    },\n    __self: this\n  }));\n};\n\nvar RangeQ = function RangeQ(props) {\n  return React.createElement(\"div\", {\n    className: \"ci-question\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }, props.q), React.createElement(\"div\", {\n    className: \"mood-measurer\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"range\",\n    min: \"1\",\n    max: \"10\",\n    value: props.val,\n    onChange: function onChange(event) {\n      return props.setAnswer(event.target.value, props.index);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"indicator\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }, \"4\")), React.createElement(\"div\", {\n    className: \"num\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, React.createElement(\"small\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, \"1\"), React.createElement(\"small\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, \"7\"))), React.createElement(\"textarea\", {\n    className: \"feelings\",\n    rows: \"1\",\n    placeholder: \"Other comments\",\n    onChange: function onChange(event) {\n      return props.setComment(event, props.index);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }));\n};\n\nvar CheckinModal =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(CheckinModal, _React$Component);\n\n  function CheckinModal(props) {\n    var _this;\n\n    _classCallCheck(this, CheckinModal);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CheckinModal).call(this, props));\n\n    _this.incrementCurrIndex = function () {\n      var i = _this.state.currIndex;\n\n      _this.setState({\n        currIndex: i + 1\n      });\n    };\n\n    _this.setAnswer = function (answer, checkinIndex) {\n      var checkins = _this.state.checkins;\n      checkins[checkinIndex].answer = answer;\n\n      _this.setState({\n        checkins: checkins\n      });\n    };\n\n    _this.setComment = function (event, checkinIndex) {\n      var checkins = _this.state.checkins;\n      checkins[checkinIndex].comment = event.target.value;\n\n      _this.setState({\n        checkins: checkins\n      });\n    };\n\n    _this.saveCheckinData = function () {\n      var time = moment().format('L'); //save to feed of every person in the network\n\n      var network = _this.props.network;\n      var data = {\n        author: _this.props.name,\n        author_uid: _this.props.uid,\n        checkin: true,\n        checkinData: _this.state.checkins,\n        timestamp: new Date()\n      };\n\n      for (var i = 0; i < network.length; i++) {\n        _this.props.firebase.feed(network[i]).add(data);\n      } //save to post\n\n\n      _this.props.firebase.posts().add(data);\n\n      _this.props.firebase.user(_this.props.uid).update({\n        // requests: firebase.firestore.FieldValue.arrayRemove(uid),\n        lastCheckin: time\n      }).then(function () {\n        _this.props.updateCheckin(time);\n      });\n    };\n\n    _this.state = {\n      checkins: props.checkins,\n      currIndex: 0\n    };\n    return _this;\n  }\n\n  _createClass(CheckinModal, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      $('input[type=\"range\"]').each(function (index) {\n        var range = $(this).parent().find('.indicator');\n        var p = $(range).find('p');\n        $(range).hide();\n        $(this).focusin(function () {\n          $(range).css('left', 'calc(' + $(this).val() * (1 / 7) * 100 + '% - 60px)');\n          $(range).show();\n        });\n        $(this).focusout(function () {\n          $(range).hide();\n        });\n        $(this).on('input', function () {\n          $(range).css('left', 'calc(' + $(this).val() * (1 / 7) * 100 + '% - 60px)');\n          $(p).text($(this).val());\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var checkinQs = [],\n          checkins = this.state.checkins,\n          currIndex = this.state.currIndex;\n\n      for (var i = currIndex; i < checkins.length && i < currIndex + 1; i++) {\n        var addEl = void 0;\n\n        if (checkins[i].type == 'text') {\n          addEl = React.createElement(TextQ, {\n            q: checkins[i].q,\n            index: i,\n            setAnswer: this.setAnswer,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 154\n            },\n            __self: this\n          });\n        } else if (checkins[i].type == 'yes/no') {\n          addEl = React.createElement(YesNoQ, {\n            q: checkins[i].q,\n            index: i,\n            setAnswer: this.setAnswer,\n            setComment: this.setComment,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 163\n            },\n            __self: this\n          });\n        } else {\n          addEl = React.createElement(RangeQ, {\n            q: checkins[i].q,\n            index: i,\n            val: checkins[i].answer ? checkins[i].answer : 5,\n            setAnswer: this.setAnswer,\n            setComment: this.setComment,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 173\n            },\n            __self: this\n          });\n        }\n\n        checkinQs.push(addEl);\n      }\n\n      var submitButton = null;\n\n      if (currIndex + 1 >= checkins.length) {\n        submitButton = React.createElement(\"button\", {\n          id: \"submit\",\n          onClick: this.saveCheckinData,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 189\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          className: \"jam jam-check\",\n          style: {\n            color: '#9FC6C1'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 190\n          },\n          __self: this\n        }));\n      } else {\n        submitButton = React.createElement(\"button\", {\n          id: \"submit\",\n          onClick: this.incrementCurrIndex,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 195\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          className: \"jam jam-arrow-right\",\n          style: {\n            color: '#9FC6C1'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 196\n          },\n          __self: this\n        }));\n      }\n\n      return React.createElement(\"div\", {\n        className: \"modal-bg\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"checkin modal\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        className: \"bg-texture first\",\n        src: texture1,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }), React.createElement(\"img\", {\n        className: \"bg-texture second\",\n        src: texture2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"bg\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }), React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }, moment().format('MMMM D')), React.createElement(\"h1\", {\n        className: \"title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"highlight\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }, \"check-in\")), React.createElement(\"div\", {\n        className: \"checkin-content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      }, checkinQs, submitButton)));\n    }\n  }]);\n\n  return CheckinModal;\n}(React.Component);\n\nexport default CheckinModal;","map":{"version":3,"sources":["/Volumes/Angela He/treehacks/src/components/CheckinModal.js"],"names":["React","Component","$","moment","texture1","texture2","TextQ","props","q","event","setAnswer","target","value","index","YesNoQ","color","setComment","RangeQ","val","CheckinModal","incrementCurrIndex","i","state","currIndex","setState","answer","checkinIndex","checkins","comment","saveCheckinData","time","format","network","data","author","name","author_uid","uid","checkin","checkinData","timestamp","Date","length","firebase","feed","add","posts","user","update","lastCheckin","then","updateCheckin","each","range","parent","find","p","hide","focusin","css","show","focusout","on","text","checkinQs","addEl","type","push","submitButton"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport $ from 'jquery';\nimport moment from 'moment';\nimport texture1 from './../graphics/flower.png';\nimport texture2 from './../graphics/thing.png';\n\n\nconst TextQ = (props) => {\n  return (\n    <div className=\"ci-question\">\n      <h2>{props.q}</h2>\n      <textarea className=\"feelings\" rows=\"3\" placeholder=\"Hmm\"\n        onChange={(event) => props.setAnswer(event.target.value, props.index)}>\n        ></textarea>\n    </div>\n  );\n};\n\nconst YesNoQ = (props) => {\n  return (\n    <div className=\"ci-question\">\n      <h2>{props.q}</h2>\n      <div className=\"yesno\">\n        <button className=\"yes\"\n          onClick={() => props.setAnswer('yes', props.index)}>\n          <span className=\"jam jam-check\" style={{ color: 'white' }}></span>\n        </button>\n        <button className=\"no\"\n          onClick={() => props.setAnswer('no', props.index)}>\n          <span className=\"jam jam-close\" style={{ color: '#8A8184' }}> </span>\n        </button>\n      </div>\n      <textarea\n        className=\"feelings\"\n        rows=\"1\"\n        placeholder=\"Other comments\"\n        onChange={(event) => props.setComment(event, props.index)}></textarea>\n    </div>\n  );\n};\n\nconst RangeQ = (props) => {\n  return (\n    <div className=\"ci-question\">\n      <h2>{props.q}</h2>\n      <div className=\"mood-measurer\">\n        <input type=\"range\"\n          min=\"1\"\n          max=\"10\"\n          value={props.val}\n          onChange={(event) => props.setAnswer(event.target.value, props.index)} />\n        <div className=\"indicator\">\n          <p>4</p>\n        </div>\n        <div className=\"num\"><small>1</small><small>7</small></div>\n      </div>\n      <textarea\n        className=\"feelings\"\n        rows=\"1\"\n        placeholder=\"Other comments\"\n        onChange={(event) => props.setComment(event, props.index)}></textarea>\n    </div>\n  );\n};\n\nclass CheckinModal extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      checkins: props.checkins,\n      currIndex: 0\n    };\n  }\n\n  componentDidMount() {\n    $('input[type=\"range\"]').each(function (index) {\n      let range = $(this).parent().find('.indicator');\n      let p = $(range).find('p');\n      $(range).hide();\n\n      $(this).focusin(function () {\n        $(range).css('left', ('calc(' + $(this).val() * (1 / 7) * 100) + '% - 60px)');\n        $(range).show();\n      });\n\n      $(this).focusout(function () {\n        $(range).hide();\n      });\n\n      $(this).on('input', function () {\n        $(range).css('left', ('calc(' + $(this).val() * (1 / 7) * 100) + '% - 60px)');\n        $(p).text($(this).val());\n      });\n    });\n  }\n\n  incrementCurrIndex = () => {\n    let i = this.state.currIndex;\n    this.setState({ currIndex: i + 1 });\n  }\n\n  setAnswer = (answer, checkinIndex) => {\n    let checkins = this.state.checkins;\n    checkins[checkinIndex].answer = answer;\n\n    this.setState({ checkins: checkins });\n  }\n\n  setComment = (event, checkinIndex) => {\n    let checkins = this.state.checkins;\n    checkins[checkinIndex].comment = event.target.value;\n\n    this.setState({ checkins: checkins });\n  }\n\n\n  //TOOD - SAVE CHECKIN DATA\n  saveCheckinData = () => {\n    let time = moment().format('L');\n\n    //save to feed of every person in the network\n    let network = this.props.network;\n    let data = {\n      author: this.props.name,  \n      author_uid: this.props.uid,\n      checkin: true,\n      checkinData: this.state.checkins,\n      timestamp: new Date()\n    };\n\n    for (let i = 0; i < network.length; i++) {\n      this.props.firebase.feed(network[i]).add(data);\n    }\n\n    //save to post\n    this.props.firebase.posts().add(data);\n\n    this.props.firebase.user(this.props.uid).update({\n      // requests: firebase.firestore.FieldValue.arrayRemove(uid),\n      lastCheckin: time\n    }).then(() => {\n      this.props.updateCheckin(time);\n    });\n\n\n  }\n\n  render() {\n    let checkinQs = [], checkins = this.state.checkins, currIndex = this.state.currIndex;\n    for (var i = currIndex; i < checkins.length && i < currIndex + 1; i++) {\n      let addEl;\n      if (checkins[i].type == 'text') {\n        addEl = (\n          <TextQ\n            q={checkins[i].q}\n            index={i}\n            setAnswer={this.setAnswer}\n          />\n        );\n      }\n      else if (checkins[i].type == 'yes/no') {\n        addEl = (\n          <YesNoQ\n            q={checkins[i].q}\n            index={i}\n            setAnswer={this.setAnswer}\n            setComment={this.setComment}\n          />\n        );\n      }\n      else {\n        addEl = (\n          <RangeQ\n            q={checkins[i].q}\n            index={i}\n            val={checkins[i].answer ? checkins[i].answer : 5}\n            setAnswer={this.setAnswer}\n            setComment={this.setComment}\n          />\n        );\n      }\n      checkinQs.push(addEl);\n    }\n\n\n    let submitButton = null;\n    if (currIndex + 1 >= checkins.length) {\n      submitButton = (\n        <button id=\"submit\" onClick={this.saveCheckinData}>\n          <span className=\"jam jam-check\" style={{ color: '#9FC6C1' }}></span>\n        </button>\n      );\n    } else {\n      submitButton = (\n        <button id=\"submit\" onClick={this.incrementCurrIndex}>\n          <span className=\"jam jam-arrow-right\" style={{ color: '#9FC6C1' }}></span>\n        </button>\n      );\n    }\n\n    return (\n      <div className=\"modal-bg\">\n        <div className=\"checkin modal\">\n          <img className=\"bg-texture first\" src={texture1} />\n          <img className=\"bg-texture second\" src={texture2} />\n          <div className=\"bg\"></div>\n          <h1>{moment().format('MMMM D')}</h1>\n          <h1 className=\"title\">\n            <div className=\"highlight\"></div><span>check-in</span>\n          </h1>\n          <div className=\"checkin-content\">\n            {checkinQs}\n\n            {submitButton}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default CheckinModal;"]},"metadata":{},"sourceType":"module"}