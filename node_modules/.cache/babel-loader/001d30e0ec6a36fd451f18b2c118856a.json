{"ast":null,"code":"import _classCallCheck from \"/Users/gollyzoom/Documents/GitHub/treehacks/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/gollyzoom/Documents/GitHub/treehacks/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/gollyzoom/Documents/GitHub/treehacks/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/gollyzoom/Documents/GitHub/treehacks/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/gollyzoom/Documents/GitHub/treehacks/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/gollyzoom/Documents/GitHub/treehacks/src/components/NetworkTab.js\";\nimport React, { Component } from 'react';\nimport AddFriend from './AddFriend';\nimport { withFirebase } from './Firebase';\nimport { request } from 'http';\nimport Avatar from './Avatar';\nvar AddFriendFB = withFirebase(AddFriend);\n\nvar NetworkTab =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(NetworkTab, _React$Component);\n\n  function NetworkTab(props) {\n    var _this;\n\n    _classCallCheck(this, NetworkTab);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(NetworkTab).call(this, props));\n\n    _this.setAddFriend = function (bool) {\n      _this.setState({\n        addFriend: bool\n      });\n    };\n\n    _this.filterNetwork = function (event) {\n      var word = event.target.value;\n    };\n\n    _this.setRequests = function (requests) {\n      _this.setState({\n        requests: requests\n      });\n\n      _this.props.setRequests(requests);\n    };\n\n    _this.setNetworkUsers = function (networkUsers) {\n      _this.loadNetworkUsers();\n\n      _this.props.setNetwork(networkUsers);\n    };\n\n    _this.loadNetworkUsers = function () {\n      _this.setState({\n        loading: true,\n        networkUsers: null\n      });\n\n      _this.props.firebase.user(ID).ref('network').once('value').then(function (snapshot) {\n        _this.setState({\n          loading: false,\n          networkUsers: snapshot.val()\n        });\n      });\n    };\n\n    _this.state = {\n      addFriend: false,\n      networkUsers: null,\n      loading: false,\n      requests: _this.props.requests\n    };\n    return _this;\n  }\n\n  _createClass(NetworkTab, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var networkRef = this.props.firebase.user(this.props.uid).ref('network');\n      networkRef.on('value', function (snapshot) {\n        _this2.setNetworkUsers(snapshot.val());\n      });\n      var requestsRef = this.props.firebase.user(this.props.uid).collection(\"requests\");\n      requestsRef.onSnapshot(function (doc) {\n        _this2.setRequests(doc.data());\n      }).catch(function (error) {\n        console.log(\"Error getting documents: \", error);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      if (this.state.networkUsers == null) {\n        if (this.state.loading == false) {\n          this.loadNetworkUsers();\n        }\n\n        return;\n      }\n\n      var alert = null;\n\n      if (this.state.requests.length > 0) {\n        alert = React.createElement(\"span\", {\n          className: \"alert\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 76\n          },\n          __self: this\n        }, this.state.requests.length);\n      }\n\n      var network = [];\n\n      for (var i = 0; i < this.state.networkUsers.length; i++) {\n        var user = this.state.networkUsers[i];\n        var addEl = React.createElement(\"div\", {\n          className: \"friend\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 84\n          },\n          __self: this\n        }, React.createElement(Avatar, {\n          PpfURL: user.PpfURL,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 85\n          },\n          __self: this\n        }), React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 86\n          },\n          __self: this\n        }, user.name), React.createElement(\"button\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          className: \"jam jam-heart\",\n          style: {\n            color: '#e38882'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87\n          },\n          __self: this\n        })));\n        network.push(addEl);\n      }\n\n      return React.createElement(\"section\", {\n        className: \"network\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, \"Your network\"), React.createElement(\"div\", {\n        className: \"header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"search-bar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        placeholder: \"search\",\n        onChange: this.filterNetwork,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        id: \"search-friends\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"jam jam-search\",\n        style: {\n          color: '#9FC6C1'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }))), React.createElement(\"button\", {\n        id: \"add-friends\",\n        onClick: function onClick() {\n          return _this3.setAddFriend(true);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"jam jam-user-plus\",\n        style: {\n          color: '#9FC6C1'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }), alert)), React.createElement(\"div\", {\n        className: \"friends\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, network), this.state.addFriend ? React.createElement(AddFriendFB, {\n        setAddFriend: this.setAddFriend,\n        uid: this.props.uid,\n        requests: this.state.requests,\n        networkUsers: this.state.network,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }) : null);\n    }\n  }]);\n\n  return NetworkTab;\n}(React.Component);\n\n;\nexport default NetworkTab;","map":{"version":3,"sources":["/Users/gollyzoom/Documents/GitHub/treehacks/src/components/NetworkTab.js"],"names":["React","Component","AddFriend","withFirebase","request","Avatar","AddFriendFB","NetworkTab","props","setAddFriend","bool","setState","addFriend","filterNetwork","event","word","target","value","setRequests","requests","setNetworkUsers","networkUsers","loadNetworkUsers","setNetwork","loading","firebase","user","ID","ref","once","then","snapshot","val","state","networkRef","uid","on","requestsRef","collection","onSnapshot","doc","data","catch","error","console","log","alert","length","network","i","addEl","PpfURL","name","color","push"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,SAAP,MAAsB,aAAtB;AACA,SAASC,YAAT,QAA6B,YAA7B;AACA,SAASC,OAAT,QAAwB,MAAxB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AAEA,IAAMC,WAAW,GAAGH,YAAY,CAACD,SAAD,CAAhC;;IAEMK,U;;;;;AACJ,sBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,oFAAMA,KAAN;;AADiB,UAyBnBC,YAzBmB,GAyBJ,UAACC,IAAD,EAAU;AACvB,YAAKC,QAAL,CAAc;AACZC,QAAAA,SAAS,EAAEF;AADC,OAAd;AAGD,KA7BkB;;AAAA,UA+BnBG,aA/BmB,GA+BH,UAACC,KAAD,EAAW;AACzB,UAAIC,IAAI,GAAGD,KAAK,CAACE,MAAN,CAAaC,KAAxB;AACD,KAjCkB;;AAAA,UAmCnBC,WAnCmB,GAmCL,UAACC,QAAD,EAAc;AAC1B,YAAKR,QAAL,CAAc;AAAEQ,QAAAA,QAAQ,EAAEA;AAAZ,OAAd;;AACA,YAAKX,KAAL,CAAWU,WAAX,CAAuBC,QAAvB;AACD,KAtCkB;;AAAA,UAyCnBC,eAzCmB,GAyCD,UAACC,YAAD,EAAkB;AAClC,YAAKC,gBAAL;;AACA,YAAKd,KAAL,CAAWe,UAAX,CAAsBF,YAAtB;AACD,KA5CkB;;AAAA,UA8CnBC,gBA9CmB,GA8CA,YAAM;AACvB,YAAKX,QAAL,CAAc;AAAEa,QAAAA,OAAO,EAAE,IAAX;AAAiBH,QAAAA,YAAY,EAAE;AAA/B,OAAd;;AAEA,YAAKb,KAAL,CAAWiB,QAAX,CACGC,IADH,CACQC,EADR,EACYC,GADZ,CACgB,SADhB,EAC2BC,IAD3B,CACgC,OADhC,EACyCC,IADzC,CAC8C,UAACC,QAAD,EAAc;AACxD,cAAKpB,QAAL,CAAc;AAAEa,UAAAA,OAAO,EAAE,KAAX;AAAkBH,UAAAA,YAAY,EAAEU,QAAQ,CAACC,GAAT;AAAhC,SAAd;AACD,OAHH;AAID,KArDkB;;AAEjB,UAAKC,KAAL,GAAa;AACXrB,MAAAA,SAAS,EAAE,KADA;AAEXS,MAAAA,YAAY,EAAE,IAFH;AAGXG,MAAAA,OAAO,EAAE,KAHE;AAIXL,MAAAA,QAAQ,EAAE,MAAKX,KAAL,CAAWW;AAJV,KAAb;AAFiB;AAQlB;;;;wCAEmB;AAAA;;AAClB,UAAIe,UAAU,GAAG,KAAK1B,KAAL,CAAWiB,QAAX,CAAoBC,IAApB,CAAyB,KAAKlB,KAAL,CAAW2B,GAApC,EAAyCP,GAAzC,CAA6C,SAA7C,CAAjB;AACAM,MAAAA,UAAU,CAACE,EAAX,CAAc,OAAd,EAAuB,UAACL,QAAD,EAAc;AACnC,QAAA,MAAI,CAACX,eAAL,CAAqBW,QAAQ,CAACC,GAAT,EAArB;AACD,OAFD;AAIA,UAAIK,WAAW,GAAG,KAAK7B,KAAL,CAAWiB,QAAX,CAAoBC,IAApB,CAAyB,KAAKlB,KAAL,CAAW2B,GAApC,EAAyCG,UAAzC,CAAoD,UAApD,CAAlB;AACAD,MAAAA,WAAW,CAACE,UAAZ,CAAuB,UAACC,GAAD,EAAS;AAC9B,QAAA,MAAI,CAACtB,WAAL,CAAiBsB,GAAG,CAACC,IAAJ,EAAjB;AACD,OAFD,EAGGC,KAHH,CAGS,UAAUC,KAAV,EAAiB;AACtBC,QAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ,EAAyCF,KAAzC;AACD,OALH;AAMD;;;6BAgCQ;AAAA;;AACP,UAAI,KAAKV,KAAL,CAAWZ,YAAX,IAA2B,IAA/B,EAAqC;AACnC,YAAI,KAAKY,KAAL,CAAWT,OAAX,IAAsB,KAA1B,EAAiC;AAC/B,eAAKF,gBAAL;AACD;;AACD;AACD;;AAED,UAAIwB,KAAK,GAAG,IAAZ;;AACA,UAAI,KAAKb,KAAL,CAAWd,QAAX,CAAoB4B,MAApB,GAA6B,CAAjC,EAAoC;AAClCD,QAAAA,KAAK,GACH;AAAM,UAAA,SAAS,EAAC,OAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAyB,KAAKb,KAAL,CAAWd,QAAX,CAAoB4B,MAA7C,CADF;AAGD;;AAED,UAAIC,OAAO,GAAG,EAAd;;AACA,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKhB,KAAL,CAAWZ,YAAX,CAAwB0B,MAA5C,EAAoDE,CAAC,EAArD,EAAyD;AACvD,YAAIvB,IAAI,GAAG,KAAKO,KAAL,CAAWZ,YAAX,CAAwB4B,CAAxB,CAAX;AACA,YAAIC,KAAK,GACP;AAAK,UAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE,oBAAC,MAAD;AAAQ,UAAA,MAAM,EAAExB,IAAI,CAACyB,MAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAOzB,IAAI,CAAC0B,IAAZ,CAFF,EAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAQ;AAAM,UAAA,SAAS,EAAC,eAAhB;AAAgC,UAAA,KAAK,EAAE;AAAEC,YAAAA,KAAK,EAAE;AAAT,WAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAR,CAHF,CADF;AAOAL,QAAAA,OAAO,CAACM,IAAR,CAAaJ,KAAb;AACD;;AAED,aACE;AAAS,QAAA,SAAS,EAAC,SAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,EAEE;AAAK,QAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAO,QAAA,IAAI,EAAC,MAAZ;AAAmB,QAAA,WAAW,EAAC,QAA/B;AAAwC,QAAA,QAAQ,EAAE,KAAKrC,aAAvD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,EAEE;AAAQ,QAAA,EAAE,EAAC,gBAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA4B;AAAM,QAAA,SAAS,EAAC,gBAAhB;AAAiC,QAAA,KAAK,EAAE;AAAEwC,UAAAA,KAAK,EAAE;AAAT,SAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAA5B,CAFF,CADF,EAKE;AAAQ,QAAA,EAAE,EAAC,aAAX;AAAyB,QAAA,OAAO,EAAE;AAAA,iBAAM,MAAI,CAAC5C,YAAL,CAAkB,IAAlB,CAAN;AAAA,SAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAM,QAAA,SAAS,EAAC,mBAAhB;AAAoC,QAAA,KAAK,EAAE;AAAE4C,UAAAA,KAAK,EAAE;AAAT,SAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,EAGGP,KAHH,CALF,CAFF,EAcE;AAAK,QAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGE,OADH,CAdF,EAiBI,KAAKf,KAAL,CAAWrB,SAAX,GACA,oBAAC,WAAD;AACE,QAAA,YAAY,EAAE,KAAKH,YADrB;AAEE,QAAA,GAAG,EAAE,KAAKD,KAAL,CAAW2B,GAFlB;AAGE,QAAA,QAAQ,EAAE,KAAKF,KAAL,CAAWd,QAHvB;AAIE,QAAA,YAAY,EAAE,KAAKc,KAAL,CAAWe,OAJ3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADA,GAMK,IAvBT,CADF;AA2BD;;;;EA/GsBhD,KAAK,CAACC,S;;AAgH9B;AAED,eAAeM,UAAf","sourcesContent":["import React, { Component } from 'react';\nimport AddFriend from './AddFriend';\nimport { withFirebase } from './Firebase';\nimport { request } from 'http';\nimport Avatar from './Avatar';\n\nconst AddFriendFB = withFirebase(AddFriend);\n\nclass NetworkTab extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      addFriend: false,\n      networkUsers: null,\n      loading: false,\n      requests: this.props.requests,\n    };\n  }\n\n  componentDidMount() {\n    let networkRef = this.props.firebase.user(this.props.uid).ref('network');\n    networkRef.on('value', (snapshot) => {\n      this.setNetworkUsers(snapshot.val())\n    });\n\n    var requestsRef = this.props.firebase.user(this.props.uid).collection(\"requests\");\n    requestsRef.onSnapshot((doc) => {\n      this.setRequests(doc.data());\n    })\n      .catch(function (error) {\n        console.log(\"Error getting documents: \", error);\n      });\n  }\n\n  setAddFriend = (bool) => {\n    this.setState({\n      addFriend: bool\n    });\n  }\n\n  filterNetwork = (event) => {\n    let word = event.target.value;\n  }\n\n  setRequests = (requests) => {\n    this.setState({ requests: requests });\n    this.props.setRequests(requests);\n  }\n\n  //expect: array of uids\n  setNetworkUsers = (networkUsers) => {\n    this.loadNetworkUsers();\n    this.props.setNetwork(networkUsers);\n  }\n\n  loadNetworkUsers = () => {\n    this.setState({ loading: true, networkUsers: null });\n\n    this.props.firebase\n      .user(ID).ref('network').once('value').then((snapshot) => {\n        this.setState({ loading: false, networkUsers: snapshot.val() });\n      });\n  }\n\n  render() {\n    if (this.state.networkUsers == null) {\n      if (this.state.loading == false) {\n        this.loadNetworkUsers();\n      }\n      return;\n    }\n\n    let alert = null;\n    if (this.state.requests.length > 0) {\n      alert = (\n        <span className=\"alert\">{this.state.requests.length}</span>\n      );\n    }\n\n    let network = [];\n    for (var i = 0; i < this.state.networkUsers.length; i++) {\n      let user = this.state.networkUsers[i];\n      var addEl = (\n        <div className=\"friend\">\n          <Avatar PpfURL={user.PpfURL} />\n          <span>{user.name}</span>\n          <button><span className=\"jam jam-heart\" style={{ color: '#e38882' }}></span></button>\n        </div>\n      );\n      network.push(addEl);\n    }\n\n    return (\n      <section className=\"network\">\n        <h2>Your network</h2>\n        <div className=\"header\">\n          <div className=\"search-bar\">\n            <input type=\"text\" placeholder=\"search\" onChange={this.filterNetwork} />\n            <button id=\"search-friends\"><span className=\"jam jam-search\" style={{ color: '#9FC6C1' }}></span></button>\n          </div>\n          <button id=\"add-friends\" onClick={() => this.setAddFriend(true)}>\n            <span className=\"jam jam-user-plus\" style={{ color: '#9FC6C1' }}></span>\n\n            {alert}\n\n          </button>\n        </div>\n        <div className=\"friends\">\n          {network}\n        </div>\n        {(this.state.addFriend ?\n          <AddFriendFB\n            setAddFriend={this.setAddFriend}\n            uid={this.props.uid}\n            requests={this.state.requests}\n            networkUsers={this.state.network}\n          /> : null)}\n      </section>\n    );\n  }\n};\n\nexport default NetworkTab;"]},"metadata":{},"sourceType":"module"}